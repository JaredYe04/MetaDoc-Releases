# 代码审计报告

**生成时间**: 2026/01/09 10:40:04

---

## 📊 总体统计

| 指标 | 数值 |
|------|------|
| 总文件数 | 410 |
| 总代码行数 (LOC) | 190,693 |
| 总代码行数 (KLOC) | 190.69 |
| 有效代码行数 | 149,178 |
| 空行数 | 41,515 |
| 平均圈复杂度 | 42.39 |
| 最大圈复杂度 | 345 |

## 🔀 进程分类统计

| 进程 | 文件数 | 代码行数 (LOC) | 代码行数 (KLOC) | 有效代码行数 | 平均圈复杂度 |
|------|--------|----------------|-----------------|--------------|--------------|
| main | 34 | 21,390 | 21.39 | 14,766 | 48.44 |
| renderer | 370 | 168,607 | 168.61 | 134,028 | 42.32 |

### 📊 进程代码量占比

![ECharts 图表 1](images/chart-1-fefee344bd9a.png)

**图表说明**：该饼图展示了主进程（main）和渲染进程（renderer）的代码量占比。从图中可以看出，渲染进程占据了 88.7% 的代码量（168,607 行），而主进程占据了 11.3% 的代码量（21,390 行）。这反映了项目的架构特点，渲染进程主要负责用户界面和交互逻辑，代码量相对较大。

### 📊 进程代码行数对比

![ECharts 图表 2](images/chart-2-45367d008c4b.png)

**图表说明**：该条形图直观对比了主进程和渲染进程的代码行数。renderer 进程的代码行数为 168,607 行，是 main 进程（21,390 行）的 7.9 倍。这种差异体现了 Electron 应用的特点，渲染进程承担了更多的业务逻辑和 UI 实现。

## 🌐 语言占比统计

| 语言 | 文件数 | 代码行数 (LOC) | 代码行数 (KLOC) | 占比 |
|------|--------|----------------|-----------------|------|
| TypeScript | 191 | 84,260 | 84.26 | 44.19% |
| Vue | 123 | 75,538 | 75.54 | 39.61% |
| JSON | 13 | 10,730 | 10.73 | 5.63% |
| JavaScript | 34 | 9,840 | 9.84 | 5.16% |
| Markdown | 24 | 5,907 | 5.91 | 3.10% |
| CSS | 19 | 3,882 | 3.88 | 2.04% |
| Python | 1 | 282 | 0.28 | 0.15% |
| Text | 3 | 223 | 0.22 | 0.12% |
| HTML | 2 | 31 | 0.03 | 0.02% |

### 📊 语言代码量占比

![ECharts 图表 3](images/chart-3-7b976c106c1d.png)

**图表说明**：该饼图展示了项目中各编程语言的代码量占比。TypeScript 是项目中使用最多的语言，占据了 44.2% 的代码量（84,260 行）。排名前三的语言分别是 TypeScript、Vue、JSON，这些语言共同构成了项目的主要技术栈。

### 📊 各语言文件数对比

![ECharts 图表 4](images/chart-4-19ce75774667.png)

**图表说明**：该条形图展示了各编程语言的文件数量对比。从图中可以看出，不同语言的文件数量存在明显差异。平均每个语言有 45.6 个文件，最多的语言有 191 个文件。文件数量的分布反映了项目的模块化程度和代码组织方式。

## 🔄 圈复杂度分析

| 复杂度范围 | 文件数 | 占比 |
|-----------|--------|------|
| 1-10 (简单) | 95 | 27.30% |
| 11-20 (中等) | 70 | 20.11% |
| 21-50 (复杂) | 91 | 26.15% |
| 50+ (非常复杂) | 92 | 26.44% |

### 📊 圈复杂度分布

![ECharts 图表 5](images/chart-5-82ab9876883b.png)

**图表说明**：该饼图展示了代码复杂度的分布情况。复杂度在 1-10 之间的简单文件占 27.3%（95 个文件），复杂度超过 50 的非常复杂文件占 26.4%（92 个文件）。理想的代码库应该以简单和中等复杂度的文件为主，高复杂度的文件需要重点关注和重构。

### 📊 圈复杂度分布对比

![ECharts 图表 6](images/chart-6-61f30d820022.png)

**图表说明**：该条形图对比了不同复杂度范围的文件数量。1-10 (简单) 的文件数量最多（95 个），这表明项目中的代码复杂度主要集中在 较低的水平。建议关注复杂度超过 50 的文件，考虑进行重构以降低维护成本。

## ⚠️ 高复杂度文件 (Top 10)

| 文件路径 | 圈复杂度 | 代码行数 |
|---------|----------|----------|
| `MarkdownEditor.vue` | 345 | 1756 |
| `SettingDebugSection.vue` | 344 | 2980 |
| `main-calls.ts` | 338 | 2552 |
| `AgentView.vue` | 311 | 2280 |
| `vditor-adapter.ts` | 235 | 1212 |
| `workspace.ts` | 230 | 1261 |
| `latex-utils.js` | 229 | 931 |
| `Outline.vue` | 225 | 1634 |
| `data-analysis-tool.ts` | 221 | 1569 |
| `llm-api.js` | 219 | 885 |

### 📊 高复杂度文件趋势

![ECharts 图表 7](images/chart-7-86ee37363780.png)

**图表说明**：该折线图展示了高复杂度文件的圈复杂度趋势。这些文件的复杂度范围从 219 到 345，平均复杂度为 269.7。复杂度超过 20 的文件通常包含较多的条件分支和循环，建议进行拆分和重构以提高代码可维护性。

### 📊 高复杂度文件对比

![ECharts 图表 8](images/chart-8-a20178034ae4.png)

**图表说明**：该条形图展示了高复杂度文件的圈复杂度对比。圈复杂度最高的文件达到了 345，这表明该文件包含大量的控制流分支。高复杂度的文件通常难以测试和维护，建议将其拆分为多个小函数或模块，每个模块的复杂度控制在 10 以下。

## 📈 进程多维度分析

### 📊 进程多维度雷达图

![ECharts 图表 9](images/chart-9-b75b3208dc43.png)

**图表说明**：该雷达图从多个维度对比了不同进程的代码特征，包括代码行数、文件数、有效代码行数和平均圈复杂度。通过雷达图可以直观地看出各进程在不同指标上的表现。理想的代码库应该在各个维度上保持平衡，避免某个维度出现极端值。

## 📊 进程代码组成分析

### 📊 进程代码组成堆叠图

![ECharts 图表 10](images/chart-10-0f372c70e91e.png)

**图表说明**：该堆叠条形图展示了各进程的代码组成结构，包括有效代码、空行和注释/其他内容。从图中可以看出，有效代码占比约为 78.3%，空行和注释有助于提高代码可读性，但过多的空行可能会影响代码密度。建议保持合理的代码密度，既保证可读性又提高开发效率。

## 📁 详细统计

### main 进程

| 语言 | 文件数 | 代码行数 |
|------|--------|----------|
| TypeScript | 33 | 21,255 |
| JavaScript | 1 | 135 |

#### main 进程语言分布

![ECharts 图表 11](images/chart-11-201d383ed7e7.png)

**图表说明**：该饼图展示了 main 进程内部各编程语言的代码量分布。TypeScript 是该进程中使用最多的语言，占据了 99.4% 的代码量。这种分布反映了该进程的技术栈选择和使用情况。


### renderer 进程

| 语言 | 文件数 | 代码行数 |
|------|--------|----------|
| Vue | 123 | 75,538 |
| TypeScript | 153 | 62,336 |
| JSON | 13 | 10,730 |
| JavaScript | 32 | 9,678 |
| Markdown | 24 | 5,907 |
| CSS | 19 | 3,882 |
| Python | 1 | 282 |
| Text | 3 | 223 |
| HTML | 2 | 31 |

#### renderer 进程语言分布

![ECharts 图表 12](images/chart-12-1538fea0093e.png)

**图表说明**：该饼图展示了 renderer 进程内部各编程语言的代码量分布。Vue 是该进程中使用最多的语言，占据了 44.8% 的代码量。这种分布反映了该进程的技术栈选择和使用情况。


## 📝 Git 提交分析（近半年）

### 📊 提交概览

| 指标 | 数值 |
|------|------|
| 分析提交数（近半年） | 267 |
| 总新增代码行数 | 422,856 |
| 总删除代码行数 | 47,464 |
| 净增代码行数 | 375,392 |
| 总变更文件数 | 2601 |
| 平均每次新增行数 | 1583.7 |
| 平均每次删除行数 | 177.8 |
| 平均每次变更文件数 | 9.7 |

### 📊 提交代码变更趋势

![ECharts 图表 13](images/chart-13-f44b385e2782.png)

**图表说明**：该折线图展示了近半年提交的代码变更趋势。新增行数和删除行数的变化反映了项目的开发活跃度。平均每次提交新增 1584 行代码，总新增 422,856 行，总删除 47,464 行。净变化趋势可以帮助了解项目的代码增长情况。

### 📊 提交影响分析

#### 提交影响分析 (1-10)

![ECharts 图表 14](images/chart-14-8692ab702287.png)

**图表说明**：该条形图展示了每次提交的影响范围。平均每次提交修改 9.7 个文件，最多一次修改了 115 个文件。文件变更数和代码行数可以帮助评估提交的复杂度和影响范围。较大的提交可能需要更多时间进行代码审查。

#### 提交影响分析 (11-20)

![ECharts 图表 15](images/chart-15-304c2ec44148.png)

#### 提交影响分析 (21-30)

![ECharts 图表 16](images/chart-16-93b518ac6e89.png)

#### 提交影响分析 (31-40)

![ECharts 图表 17](images/chart-17-70d4e978bfd0.png)

#### 提交影响分析 (41-50)

![ECharts 图表 18](images/chart-18-8d12bc5bfec6.png)

#### 提交影响分析 (51-60)

![ECharts 图表 19](images/chart-19-eed9c9e5f52e.png)

#### 提交影响分析 (61-70)

![ECharts 图表 20](images/chart-20-aca6b7a0c173.png)

#### 提交影响分析 (71-80)

![ECharts 图表 21](images/chart-21-b82d71f49774.png)

#### 提交影响分析 (81-90)

![ECharts 图表 22](images/chart-22-8f441eeec537.png)

#### 提交影响分析 (91-100)

![ECharts 图表 23](images/chart-23-9838c7de6510.png)

#### 提交影响分析 (101-110)

![ECharts 图表 24](images/chart-24-7001f589d824.png)

#### 提交影响分析 (111-120)

![ECharts 图表 25](images/chart-25-2f1319735927.png)

#### 提交影响分析 (121-130)

![ECharts 图表 26](images/chart-26-8caaba2832f4.png)

#### 提交影响分析 (131-140)

![ECharts 图表 27](images/chart-27-bdd994ca03f6.png)

#### 提交影响分析 (141-150)

![ECharts 图表 28](images/chart-28-b81e61c73884.png)

#### 提交影响分析 (151-160)

![ECharts 图表 29](images/chart-29-e643eccdeb98.png)

#### 提交影响分析 (161-170)

![ECharts 图表 30](images/chart-30-ef8614e1fb1f.png)

#### 提交影响分析 (171-180)

![ECharts 图表 31](images/chart-31-2a5428195fba.png)

#### 提交影响分析 (181-190)

![ECharts 图表 32](images/chart-32-47c56daa5c13.png)

#### 提交影响分析 (191-200)

![ECharts 图表 33](images/chart-33-2c4666e1ec0e.png)

#### 提交影响分析 (201-210)

![ECharts 图表 34](images/chart-34-5872c40ab5a2.png)

#### 提交影响分析 (211-220)

![ECharts 图表 35](images/chart-35-3e99efd7a773.png)

#### 提交影响分析 (221-230)

![ECharts 图表 36](images/chart-36-a3eefdcdc63e.png)

#### 提交影响分析 (231-240)

![ECharts 图表 37](images/chart-37-53b261304d7f.png)

#### 提交影响分析 (241-250)

![ECharts 图表 38](images/chart-38-d6c58cb4d230.png)

#### 提交影响分析 (251-260)

![ECharts 图表 39](images/chart-39-b93124125dfe.png)

#### 提交影响分析 (261-267)

![ECharts 图表 40](images/chart-40-facb097ffa28.png)

### 📊 贡献者提交分布

![ECharts 图表 41](images/chart-41-da6270a98be0.png)

**图表说明**：该饼图展示了各贡献者的提交次数分布。共有 1 位贡献者参与了近半年的开发工作，其中 Jared Ye 贡献最多，占 100.0% 的提交。这反映了团队的协作情况和各成员的参与度。

### 📊 提交频率分析

![ECharts 图表 42](images/chart-42-f5debcc3f339.png)

**图表说明**：该柱状图展示了提交的时间分布频率。平均每天有 3.6 次提交，最多一天有 19 次提交。提交频率可以反映项目的开发节奏和活跃度，持续稳定的提交频率通常表明项目处于良好的开发状态。

### 📋 最近提交列表（Top 10）

| 提交 Hash | 作者 | 日期 | 提交信息 | 文件数 | 新增 | 删除 |
|-----------|------|------|----------|--------|------|------|
| `7824a76` | Jared Ye | 2026/01/08 17:55 | feat: 支持工作目录设置/菜单 | 28 | +2415 | -515 |
| `3c3317a` | Jared Ye | 2026/01/08 13:26 | fix: 若干重大UI修复 2 | 41 | +3541 | -1229 |
| `16d8b20` | Jared Ye | 2026/01/07 17:54 | fix: 公式识别支持会话+sqlite | 4 | +715 | -133 |
| `d985d8e` | Jared Ye | 2026/01/07 17:53 | fix: 若干重大UI修复 | 23 | +949 | -379 |
| `afd1aff` | Jared Ye | 2026/01/07 09:31 | fix: 重构了整个Tab布局part2 | 20 | +3690 | -1006 |
| `b836422` | Jared Ye | 2026/01/06 17:49 | refactor:  重构了整个Tab布局 | 23 | +2861 | -562 |
| `3c0168a` | Jared Ye | 2026/01/06 13:36 | fix: 工具调用列表状态显示 | 3 | +86 | -13 |
| `242a7ff` | Jared Ye | 2026/01/06 11:13 | fix: 公式带tag时居中问题修复 | 1 | +16 | -8 |
| `5a5ae33` | Jared Ye | 2026/01/06 10:53 | fix: 把latex转omml逻辑迁移到npm包 2 | 12 | +61 | -1831 |
| `bc4ce79` | Jared Ye | 2026/01/06 10:41 | fix: 修复了求和符号，连乘符号，积分符号等导出问题 | 2 | +6 | -5 |

## 📈 时间段改动量占比分析

### 📊 改动量概览

| 时间段 | 提交数 | 新增行数 | 删除行数 | 累计改动量 | 净变化量 | 净变化占比 |
|--------|--------|----------|----------|------------|----------|-------------|
| 近一周 | 53 | +24,237 | -7,770 | 32,007 | +16,467 | 8.61% |
| 近一月 | 117 | +65,371 | -15,259 | 80,630 | +50,112 | 26.20% |
| 近一季 | 230 | +200,461 | -34,681 | 235,142 | +165,780 | 86.67% |
| 近半年 | 267 | +211,788 | -38,967 | 250,755 | +172,821 | 90.35% |
| 近一年 | 289 | +229,383 | -44,284 | 273,667 | +185,099 | 96.77% |
| 所有时间 | 296 | +237,166 | -45,568 | 282,734 | +191,598 | 100.17% |

> 💡 **说明**：
> - **累计改动量** = 新增行数 + 删除行数（同一文件多次修改会累加，可能超过项目代码量）
> - **净变化量** = 新增行数 - 删除行数（实际代码增长量）
> - **净变化占比** = 净变化量的绝对值 / 项目当前代码量 × 100%


### 📊 时间段改动量对比（堆叠柱状图）

![ECharts 图表 43](images/chart-43-73c2e0cc3a10.png)

**图表说明**：该条形图对比了不同时间段的代码改动量。平均每个时间段的改动量为 192489 行，最多为 282,734 行。结合占比趋势线可以直观看出各时间段改动量占项目总代码量的比例，有助于评估代码变更的规模和频率。

### 📊 时间段改动量组成（新增/删除）

![ECharts 图表 44](images/chart-44-2e8270e33d66.png)

**图表说明**：该堆叠条形图展示了不同时间段的新增和删除代码行数。总新增 968,406 行，总删除 186,529 行，净增 781,877 行。通过对比新增和删除可以了解代码的演进方向，净增为正表示代码在增长，净增为负表示代码在精简。

### 💡 分析说明

- **最活跃时间段**：所有时间（净变化 +191,598 行，占比 100.17%）
- **最不活跃时间段**：近一周（净变化 +16,467 行，占比 8.61%）
- **平均净变化占比**：68.13%
- **累计总改动量**：1,154,935 行（新增 968,406 行，删除 186,529 行）
- **总净变化量**：+781,877 行

> 💡 **提示**：时间段改动量占比反映了项目在不同时期的开发活跃度。净变化占比使用净变化量（新增-删除）的绝对值计算，更准确地反映了代码的实际增长情况。累计改动量可能超过项目代码量，因为同一文件可能被多次修改。

## 📦 NPM 依赖项分析

### 📊 依赖项概览

| 指标 | 数值 |
|------|------|
| 生产依赖 (dependencies) | 90 |
| 开发依赖 (devDependencies) | 26 |
| 总依赖项数 | 116 |
| 生产依赖占比 | 77.6% |
| 开发依赖占比 | 22.4% |

### 📊 依赖项类型对比

![ECharts 图表 45](images/chart-45-de8e6ca4d209.png)

**图表说明**：该条形图对比了生产依赖和开发依赖的数量。生产依赖（90 个）占 77.6%，开发依赖（26 个）占 22.4%。合理的依赖结构应该以生产依赖为主，开发依赖用于构建和测试工具。

### 📊 依赖项作用域分布

![ECharts 图表 46](images/chart-46-1316d47bd2a8.png)

**图表说明**：该饼图展示了依赖项按作用域（scope）的分布情况。(无作用域) 作用域的依赖项最多，占 75.9%（88 个包）。作用域分布反映了项目使用的技术栈和工具链。

### 📊 依赖项作用域对比

![ECharts 图表 47](images/chart-47-54b51f36b1ef.png)

**图表说明**：该条形图展示了各作用域的依赖项数量对比。平均每个作用域有 6.4 个依赖项，最多的作用域有 88 个依赖项。这反映了项目对不同技术栈的依赖程度。

### 📊 版本前缀分布

![ECharts 图表 48](images/chart-48-5c2f5f83646e.png)

**图表说明**：该饼图展示了依赖项版本前缀的分布情况。兼容版本（^）占 99.1%（115 个包），这是最常见的版本管理方式，允许自动更新小版本和补丁版本。精确版本通常用于需要锁定特定版本的场景。

### 📋 主要依赖项列表 (Top 20)

| 依赖项名称 | 版本 | 类型 |
|-----------|------|------|
| `@babel/core` | ^7.27.1 | 生产依赖 |
| `@babel/plugin-proposal-private-methods` | ^7.18.6 | 开发依赖 |
| `@babel/plugin-transform-nullish-coalescing-operator` | ^7.27.1 | 生产依赖 |
| `@babel/plugin-transform-optional-chaining` | ^7.27.1 | 生产依赖 |
| `@babel/plugin-transform-private-methods` | ^7.27.1 | 开发依赖 |
| `@babel/preset-env` | ^7.27.2 | 生产依赖 |
| `@capacitor/android` | ^7.2.0 | 生产依赖 |
| `@capacitor/cli` | ^7.2.0 | 生产依赖 |
| `@capacitor/core` | ^7.2.0 | 生产依赖 |
| `@electron-toolkit/eslint-config` | ^1.0.2 | 开发依赖 |
| `@electron-toolkit/preload` | ^3.0.1 | 生产依赖 |
| `@electron-toolkit/utils` | ^3.0.0 | 生产依赖 |
| `@element-plus/icons-vue` | ^2.3.1 | 生产依赖 |
| `@google/genai` | ^1.30.0 | 生产依赖 |
| `@handsontable/vue3` | ^16.2.0 | 生产依赖 |
| `@msgpack/msgpack` | ^3.1.3 | 生产依赖 |
| `@oneidentity/zstd-js` | ^1.0.3 | 生产依赖 |
| `@originjs/vite-plugin-commonjs` | ^1.0.3 | 开发依赖 |
| `@resvg/resvg-js` | ^2.6.2 | 生产依赖 |
| `@rollup/plugin-babel` | ^6.0.4 | 生产依赖 |

